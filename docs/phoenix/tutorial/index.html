<!DOCTYPE html>
<html><head><meta charset="utf-8"/><meta http-equiv="X-UA-Compatible" content="IE=edge"/><meta name="viewport" content="width=device-width, initial-scale=1.0 maximum-scale=1.0"/><title>Quickstart - GraphQL Elixir</title><link rel="shortcut icon" href="/favicon.ico" type="image/x-icon"/><link href="https://fonts.googleapis.com/css?family=Raleway:400,600,200,100" rel="stylesheet" type="text/css"/><link href="/app.css" rel="stylesheet" type="text/css"/></head><body><div id="react-mount"><div data-reactid=".graphql-elixir" data-react-checksum="-999357970"><div data-reactid=".graphql-elixir.0"><div class="bm-overlay" style="position:fixed;z-index:1;width:100%;height:100%;background:rgba(0, 0, 0, 0.3);opacity:0;transform:translate3d(-100%, 0, 0);transition:opacity 0.3s, transform 0s 0.3s;" data-reactid=".graphql-elixir.0.$/=10"></div><div id="" class="bm-menu-wrap" style="position:fixed;right:inherit;z-index:2;width:200px;height:100%;transform:translate3d(-220px, 0, 0);transition:transform 0.4s cubic-bezier(0.7, 0, 0.3, 1);" data-reactid=".graphql-elixir.0.$/=11"><div class="bm-menu" style="height:100%;box-sizing:border-box;" data-reactid=".graphql-elixir.0.$/=11.$/=11"><nav class="bm-item-list" style="height:100%;" data-reactid=".graphql-elixir.0.$/=11.$/=11.0"><a href="http://playground.graphql-elixir.org" style="display:block;outline:none;transform:translate3d(0, 500px, 0);transition:transform 0s 0.2s cubic-bezier(0.7, 0, 0.3, 1);" data-reactid=".graphql-elixir.0.$/=11.$/=11.0.$0//=10/=1$0/=010">Try it out</a><span style="display:block;outline:none;transform:translate3d(0, 1000px, 0);transition:transform 0s 0.2s cubic-bezier(0.7, 0, 0.3, 1);" data-reactid=".graphql-elixir.0.$/=11.$/=11.0.$1//=11/=1$1/=011"><a class="active" href="/docs/quickstart/" data-reactid=".graphql-elixir.0.$/=11.$/=11.0.$1//=11/=1$1/=011.0">Docs</a></span><span style="display:block;outline:none;transform:translate3d(0, 1500px, 0);transition:transform 0s 0.2s cubic-bezier(0.7, 0, 0.3, 1);" data-reactid=".graphql-elixir.0.$/=11.$/=11.0.$2//=12/=1$2/=012"><a class="" href="/community/" data-reactid=".graphql-elixir.0.$/=11.$/=11.0.$2//=12/=1$2/=012.0">Community</a></span><a href="https://github.com/joshprice/graphql-elixir" style="display:block;outline:none;transform:translate3d(0, 2000px, 0);transition:transform 0s 0.2s cubic-bezier(0.7, 0, 0.3, 1);" data-reactid=".graphql-elixir.0.$/=11.$/=11.0.$3//=13/=1$3/=013">Github</a></nav></div><div data-reactid=".graphql-elixir.0.$/=11.$/=12"><div data-reactid=".graphql-elixir.0.$/=11.$/=12.0"><span class="bm-cross" style="position:absolute;width:3px;height:14px;top:14px;right:18px;cursor:pointer;transform:rotate(45deg);z-index:1;" data-reactid=".graphql-elixir.0.$/=11.$/=12.0.$/=10"></span><span class="bm-cross" style="position:absolute;width:3px;height:14px;top:14px;right:18px;cursor:pointer;transform:rotate(-45deg);z-index:1;" data-reactid=".graphql-elixir.0.$/=11.$/=12.0.$/=11"></span><button style="width:14px;height:14px;position:absolute;right:13px;top:14px;padding:0;overflow:hidden;text-indent:14px;font-size:14px;border:none;background:transparent;color:transparent;outline:none;z-index:1;" data-reactid=".graphql-elixir.0.$/=11.$/=12.0.$/=12">Close Menu</button></div></div></div><div class="bm-burger-button" style="z-index:1;" data-reactid=".graphql-elixir.0.$=12"><span data-reactid=".graphql-elixir.0.$=12.$/=10"><span class="bm-burger-bars" style="position:absolute;height:20%;left:0;right:0;top:0%;opacity:1;" data-reactid=".graphql-elixir.0.$=12.$/=10.$/=10"></span><span class="bm-burger-bars" style="position:absolute;height:20%;left:0;right:0;top:40%;opacity:1;" data-reactid=".graphql-elixir.0.$=12.$/=10.$/=11"></span><span class="bm-burger-bars" style="position:absolute;height:20%;left:0;right:0;top:80%;opacity:1;" data-reactid=".graphql-elixir.0.$=12.$/=10.$/=12"></span></span><button style="position:absolute;left:0;right:0;top:0;bottom:0;margin:0;padding:0;border:none;font-size:14px;color:transparent;background:transparent;outline:none;" data-reactid=".graphql-elixir.0.$=12.$/=11">Open Menu</button></div></div><header class="header" data-reactid=".graphql-elixir.1"><div class="header-wrapper" data-reactid=".graphql-elixir.1.0"><a class="header-logo" href="/" data-reactid=".graphql-elixir.1.0.0"><span data-reactid=".graphql-elixir.1.0.0.0"><svg width="100%" height="100%" viewBox="0 0 100 100" xmlns="http://www.w3.org/2000/svg" class="logo">
  <g fill="none" fill-rule="evenodd">
    <path class="logo-path" d="M 49.17 10.915 L 15.415 30.29 l.058 39.252 34.633 20.082 33.345-18.95-.023-39.79 z" stroke="white" stroke-width="4.987"/>
    <g transform="translate(41.5 3)"><ellipse cx="7.934" cy="7.97" rx="7.934" ry="7.97" fill="white"/></g>
    <g transform="translate(8 22.482)"><ellipse cx="7.934" cy="7.97" rx="7.934" ry="7.97" fill="white"/></g>
    <g transform="translate(8 62.33)"><ellipse cx="7.934" cy="7.97" rx="7.934" ry="7.97" fill="white"/></g>
    <g transform="translate(42.382 81.813)"><ellipse cx="7.934" cy="7.97" rx="7.934" ry="7.97" fill="white"/></g>
    <g transform="translate(75.882 62.33)"><ellipse cx="7.934" cy="7.97" rx="7.934" ry="7.97" fill="white"/></g>
    <g transform="translate(75.882 22.482)"><ellipse cx="7.934" cy="7.97" rx="7.934" ry="7.97" fill="white"/></g>
    <g transform="translate(34.5 29.5)">
      <path fill="white" stroke="white" stroke-width="1" class="logo-path"
        d="M15 3
           Q16.5 6.8 25 18
           A12.8 12.8 0 1 1 5 18
           Q13.5 6.8 15 3z" />
    </g>
  </g>
</svg>
</span><span data-reactid=".graphql-elixir.1.0.0.1">GraphQL Elixir</span></a><nav class="header-nav" data-reactid=".graphql-elixir.1.0.1"><a href="http://playground.graphql-elixir.org" data-reactid=".graphql-elixir.1.0.1.0">Try it out</a><a class="active" href="/docs/quickstart/" data-reactid=".graphql-elixir.1.0.1.1">Docs</a><a class="" href="/community/" data-reactid=".graphql-elixir.1.0.1.2">Community</a><a href="https://github.com/joshprice/graphql-elixir" data-reactid=".graphql-elixir.1.0.1.3">Github</a></nav></div></header><div data-reactid=".graphql-elixir.2"><div class="page-title" data-reactid=".graphql-elixir.2.0"><h1 data-reactid=".graphql-elixir.2.0.0">Documentation</h1></div><div class="docs" data-reactid=".graphql-elixir.2.1"><aside class="docs-aside" data-reactid=".graphql-elixir.2.1.0"><div class="docs-aside-group" data-reactid=".graphql-elixir.2.1.0.0:$quickstart"><h3 data-reactid=".graphql-elixir.2.1.0.0:$quickstart.0">Quickstart</h3><a class="" href="/docs/quickstart/" data-reactid=".graphql-elixir.2.1.0.0:$quickstart.1:$/docs/quickstart/">Getting Started</a></div><div class="docs-aside-group" data-reactid=".graphql-elixir.2.1.0.0:$walkthrough"><h3 data-reactid=".graphql-elixir.2.1.0.0:$walkthrough.0">Walkthrough</h3><a class="" href="/docs/basic-types/" data-reactid=".graphql-elixir.2.1.0.0:$walkthrough.1:$/docs/basic-types/">Basic Types</a><a class="" href="/docs/objecttypes/" data-reactid=".graphql-elixir.2.1.0.0:$walkthrough.1:$/docs/objecttypes/">ObjectTypes</a></div><select class="docs-aside-navselect" data-reactid=".graphql-elixir.2.1.0.1"><optgroup label="Quickstart" data-reactid=".graphql-elixir.2.1.0.1.$quickstart"><option value="/docs/quickstart/" data-reactid=".graphql-elixir.2.1.0.1.$quickstart.$/docs/quickstart/">Getting Started</option></optgroup><optgroup label="Walkthrough" data-reactid=".graphql-elixir.2.1.0.1.$walkthrough"><option value="/docs/basic-types/" data-reactid=".graphql-elixir.2.1.0.1.$walkthrough.$/docs/basic-types/">Basic Types</option><option value="/docs/objecttypes/" data-reactid=".graphql-elixir.2.1.0.1.$walkthrough.$/docs/objecttypes/">ObjectTypes</option></optgroup></select></aside><div class="docs-content" data-reactid=".graphql-elixir.2.1.1"><div data-reactid=".graphql-elixir.2.1.1.0"><div class="markdown" data-reactid=".graphql-elixir.2.1.1.0.1"><div data-reactid=".graphql-elixir.2.1.1.0.1.0"><h1>Django Tutorial</h1>
<p>Graphene has a number of additional features that are designed to make
working with Django <em>really simple</em>.</p>
<p><strong>Note: The code in this quickstart is pulled from the
<a href="https://github.com/graphql-python/graphene/tree/master/examples/cookbook_django">cookbook example app</a></strong>.</p>
<h2>Setup the Django project</h2>
<p>We will setup the project, create the following:</p>
<ul>
<li>A Django project called <code>cookbook</code></li>
<li>An app within <code>cookbook</code> called <code>ingredients</code></li>
</ul>
<pre><code class="language-bash"><span class="hljs-comment"># Create the project directory</span>
mkdir cookbook
<span class="hljs-built_in">cd</span> cookbook

<span class="hljs-comment"># Create a virtualenv to isolate our package dependencies locally</span>
virtualenv env
<span class="hljs-built_in">source</span> env/bin/activate  <span class="hljs-comment"># On Windows use `env\Scripts\activate`</span>

<span class="hljs-comment"># Install Django and Graphene with Django support</span>
pip install django
pip install graphene[django]
pip install django-graphiql

<span class="hljs-comment"># Set up a new project with a single application</span>
django-admin.py startproject cookbook .  <span class="hljs-comment"># Note the trailing '.' character</span>
django-admin.py startapp ingredients
</code></pre>
<p>Now sync your database for the first time:</p>
<pre><code class="language-bash">python manage.py migrate
</code></pre>
<p>Let’s create a few simple models…</p>
<h2>Defining our models</h2>
<p>Let’s get started with these models:</p>
<pre><code class="language-python"><span class="hljs-comment"># cookbook/ingredients/models.py</span>
<span class="hljs-keyword">from</span> django.db <span class="hljs-keyword">import</span> models


<span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">Category</span><span class="hljs-params">(models.Model)</span>:</span>
    name = models.CharField(max_length=<span class="hljs-number">100</span>)

    <span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">__str__</span><span class="hljs-params">(self)</span>:</span>
        <span class="hljs-keyword">return</span> self.name


<span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">Ingredient</span><span class="hljs-params">(models.Model)</span>:</span>
    name = models.CharField(max_length=<span class="hljs-number">100</span>)
    notes = models.TextField()
    category = models.ForeignKey(Category, related_name=<span class="hljs-string">'ingredients'</span>)

    <span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">__str__</span><span class="hljs-params">(self)</span>:</span>
        <span class="hljs-keyword">return</span> self.name
</code></pre>
<h2>Schema</h2>
<p>GraphQL presents your objects to the world as a graph structure rather than a more
hierarchical structure to which you may be accustomed. In order to create this
representation, Graphene needs to know about each <em>type</em> of object which will appear in
the graph.</p>
<p>This graph also has a <em>root type</em> through which all access begins. This is the <code>Query</code> class below.
In this example, we provide the ability to list all users via <code>all_users</code>, and the
ability to obtain a specific user via <code>get_user</code>.</p>
<p>Create <code>cookbook/ingredients/schema.py</code> and type the following:</p>
<pre><code class="language-python"><span class="hljs-comment"># cookbook/ingredients/schema.py</span>
<span class="hljs-keyword">from</span> graphene <span class="hljs-keyword">import</span> relay, ObjectType
<span class="hljs-keyword">from</span> graphene.contrib.django.filter <span class="hljs-keyword">import</span> DjangoFilterConnectionField
<span class="hljs-keyword">from</span> graphene.contrib.django.types <span class="hljs-keyword">import</span> DjangoNode

<span class="hljs-keyword">from</span> cookbook.ingredients.models <span class="hljs-keyword">import</span> Category, Ingredient


<span class="hljs-comment"># Graphene will automatically map the User model's fields onto the UserType.</span>
<span class="hljs-comment"># This is configured in the UserType's Meta class (as you can see below)</span>
<span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">CategoryNode</span><span class="hljs-params">(DjangoNode)</span>:</span>
    <span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">Meta</span>:</span>
        model = Category
        filter_fields = [<span class="hljs-string">'name'</span>, <span class="hljs-string">'ingredients'</span>]
        filter_order_by = [<span class="hljs-string">'name'</span>]


<span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">IngredientNode</span><span class="hljs-params">(DjangoNode)</span>:</span>
    <span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">Meta</span>:</span>
        model = Ingredient
        <span class="hljs-comment"># Allow for some more advanced filtering here</span>
        filter_fields = {
            <span class="hljs-string">'name'</span>: [<span class="hljs-string">'exact'</span>, <span class="hljs-string">'icontains'</span>, <span class="hljs-string">'istartswith'</span>],
            <span class="hljs-string">'notes'</span>: [<span class="hljs-string">'exact'</span>, <span class="hljs-string">'icontains'</span>],
            <span class="hljs-string">'category'</span>: [<span class="hljs-string">'exact'</span>],
            <span class="hljs-string">'category__name'</span>: [<span class="hljs-string">'exact'</span>],
        }
        filter_order_by = [<span class="hljs-string">'name'</span>, <span class="hljs-string">'category__name'</span>]


<span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">Query</span><span class="hljs-params">(ObjectType)</span>:</span>
    category = relay.NodeField(CategoryNode)
    all_categories = DjangoFilterConnectionField(CategoryNode)

    ingredient = relay.NodeField(IngredientNode)
    all_ingredients = DjangoFilterConnectionField(IngredientNode)

    <span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">Meta</span>:</span>
        abstract = <span class="hljs-keyword">True</span>
</code></pre>
<p>The filtering functionality is provided by
<a href="https://django-filter.readthedocs.org">django-filter</a>. See the
<a href="https://django-filter.readthedocs.org/en/latest/usage.html#the-filter">usage documentation</a>
for details on the format for <code>filter_fields</code>.</p>
<p>Note that the above <code>Query</code> class is marked as ‘abstract’. This is because we
want will now create a project-level query which will combine all our app-level
queries.</p>
<p>Create the parent project-level <code>cookbook/schema.py</code>:</p>
<pre><code class="language-python"><span class="hljs-keyword">import</span> graphene

<span class="hljs-keyword">import</span> cookbook.ingredients.schema


<span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">Query</span><span class="hljs-params">(cookbook.ingredients.schema.Query)</span>:</span>
    <span class="hljs-comment"># This class will inherit from multiple Queries</span>
    <span class="hljs-comment"># as we begin to add more apps to our project</span>
    <span class="hljs-keyword">pass</span>

schema = graphene.Schema(name=<span class="hljs-string">'Cookbook Schema'</span>)
schema.query = Query
</code></pre>
<p>You can think of this as being something like your top-level <code>urls.py</code>
file (although it currently lacks any namespacing).</p>
<h2>Adding GraphiQL</h2>
<p>GraphiQL is a web-based integrated development environment to assist in the
writing and executing of GraphQL queries. It will provide us with a simple
and easy way of testing our cookbook project.</p>
<p>Add <code>django_graphiql</code> to <code>INSTALLED_APPS</code> in <code>cookbook/settings.py</code>:</p>
<pre><code class="language-python">INSTALLED_APPS = [
    ...
    <span class="hljs-string">'django_graphiql'</span>,

    <span class="hljs-comment"># This will also make the `graphql_schema` management command available</span>
    <span class="hljs-string">'graphene.contrib.django'</span>,
]
</code></pre>
<h2>Creating GraphQL and GraphiQL views</h2>
<p>Unlike a RESTful API, there is only a single URL from which GraphQL is accessed.
Requests to this URL are handled by Graphene’s <code>GraphQLView</code> view.</p>
<p>Additionally, we’ll add a URL for aforementioned GraphiQL, and for the Django admin
interface (the latter can be useful for creating test data).</p>
<pre><code class="language-python"><span class="hljs-keyword">from</span> django.conf.urls <span class="hljs-keyword">import</span> url, include
<span class="hljs-keyword">from</span> django.contrib <span class="hljs-keyword">import</span> admin
<span class="hljs-keyword">from</span> django.views.decorators.csrf <span class="hljs-keyword">import</span> csrf_exempt

<span class="hljs-keyword">from</span> graphene.contrib.django.views <span class="hljs-keyword">import</span> GraphQLView

<span class="hljs-keyword">from</span> cookbook.schema <span class="hljs-keyword">import</span> schema

urlpatterns = [
    url(<span class="hljs-string">r'^admin/'</span>, admin.site.urls),
    url(<span class="hljs-string">r'^graphql'</span>, csrf_exempt(GraphQLView.as_view(schema=schema))),
    url(<span class="hljs-string">r'^graphiql'</span>, include(<span class="hljs-string">'django_graphiql.urls'</span>)),
]
</code></pre>
<h2>Load some test data</h2>
<p>Now is a good time to load up some test data. The easiest option will be to
<a href="https://raw.githubusercontent.com/graphql-python/graphene/feature/django/examples/cookbook/cookbook/ingredients/fixtures/ingredients.json">download the ingredients.json</a>
fixture and place it in
<code>cookbook/ingredients/fixtures/ingredients.json</code>. You can then run the following:</p>
<pre><code>$ python ./manage<span class="hljs-class">.py</span> loaddata ingredients

Installed <span class="hljs-number">6</span> <span class="hljs-function"><span class="hljs-title">object</span><span class="hljs-params">(s)</span></span> from <span class="hljs-number">1</span> <span class="hljs-function"><span class="hljs-title">fixture</span><span class="hljs-params">(s)</span></span>
</code></pre>
<p>Alternatively you can use the Django admin interface to create some data youself.
You’ll need to run the development server (see below), and create a login
for yourself too (<code>./manage.py createsuperuser</code>).</p>
<h2>Testing our GraphQL schema</h2>
<p>We’re now ready to test the API we’ve built. Let’s fire up the server from the command line.</p>
<pre><code class="language-bash">$ python ./manage.py runserver

Performing system checks...
Django version <span class="hljs-number">1.9</span>, using settings <span class="hljs-string">'cookbook.settings'</span>
Starting development server at http://<span class="hljs-number">127.0</span>.<span class="hljs-number">0.1</span>:<span class="hljs-number">8000</span>/
Quit the server with CONTROL-C.
</code></pre>
<p>Go to <a href="http://localhost:8000/graphiql">localhost:8000/graphiql</a> and type your first query!</p>
<pre><code class="language-graphql">query {
  allIngredients {
    edges {
      <span class="hljs-keyword">node</span><span class="hljs-identifier"> </span><span class="hljs-title">{
        id</span>,
        name
      }
    }
  }
}
</code></pre>
<p>The above will return the names &amp; IDs for all ingredients. But perhaps you want
a specific ingredient:</p>
<pre><code class="language-graphql">query {
  <span class="hljs-comment"># Graphene creates globally unique IDs for all objects.</span>
  <span class="hljs-comment"># You may need to copy this value from the results of the first query</span>
  ingredient(<span class="hljs-property">id</span>: <span class="hljs-string">"SW5ncmVkaWVudE5vZGU6MQ=="</span>) {
    <span class="hljs-property">name</span>
  }
}
</code></pre>
<p>You can also get each ingredient for each category:</p>
<pre><code class="language-graphql">query {
  allCategories {
    edges {
      <span class="hljs-keyword">node</span><span class="hljs-identifier"> </span><span class="hljs-title">{
        name</span>,
        ingredients {
          edges {
            <span class="hljs-keyword">node</span><span class="hljs-identifier"> </span><span class="hljs-title">{
              name</span>
            }
          }
        }
      }
    }
  }
}
</code></pre>
<p>Or you can get only ‘meat’ ingredients containing the letter ‘e’:</p>
<pre><code class="language-graphql">query {
  <span class="hljs-comment"># You can also use `category: "CATEGORY GLOBAL ID"`</span>
  allIngredients(name_Icontains: <span class="hljs-string">"e"</span>, categoryName: <span class="hljs-string">"Meat"</span>) {
    edges {
      <span class="hljs-keyword">node</span><span class="hljs-identifier"> </span><span class="hljs-title">{
        name</span>
      }
    }
  }
}
</code></pre>
</div><a href="https://github.com/graphql-elixir/graphql-elixir.github.io/edit/source/pages/docs/phoenix/tutorial.md" class="improve-document-link" data-reactid=".graphql-elixir.2.1.1.0.1.1">Edit page</a></div></div><a class="docs-next" href="/docs/quickstart/" data-reactid=".graphql-elixir.2.1.1.1"><span data-reactid=".graphql-elixir.2.1.1.1.0">Next - </span><span data-reactid=".graphql-elixir.2.1.1.1.1">Getting Started</span><span data-reactid=".graphql-elixir.2.1.1.1.2"> →</span></a></div></div></div></div></div><script src="/bundle.js"></script><script>
            (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
            (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
            m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
            })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

            ga('create', 'UA-xxxxx', 'auto');
            ga('send', 'pageview');
            </script></body></html>